<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Manager Dashboard</title>
<style>
:root{
  --sidebar-w: 260px;
  --accent: #0b74da;
  --bg: #f4f7fb;
  --card: #fff;
}
body,html{margin:0;padding:0;font-family:Arial,sans-serif;background:var(--bg);}
.app{display:flex;min-height:100vh;}

/* Sidebar */
.sidebar{
  width:var(--sidebar-w); background:var(--card); padding:20px; box-shadow:4px 10px 30px rgba(0,0,0,0.06);
}
.brand{margin-bottom:20px;}
.brand h2{margin:0;color:var(--accent);}
.nav a{
  display:block;padding:10px 12px;margin:6px 0;border-radius:8px;color:var(--accent);text-decoration:none;font-weight:600;transition:0.2s;
}
.nav a:hover{background:var(--bg);transform:translateX(5px);}
.profile-card{background:#eef5ff;padding:15px;border-radius:10px;margin-top:15px;animation:fadeIn 0.6s;}
.profile-card p{margin:5px 0;}

/* Main content */
.content{flex:1;padding:20px;}
.card{background:var(--card);padding:20px;border-radius:10px;box-shadow:0 4px 15px rgba(0,0,0,0.1);margin-bottom:20px;opacity:0;transform:translateY(20px);transition:all 0.5s;}
.card.show{opacity:1;transform:translateY(0);}
label{display:block;margin-top:10px;font-weight:bold;}
input, select, button{width:100%;padding:10px;margin-top:5px;border-radius:6px;border:1px solid #ccc;font-size:14px;transition:0.2s;}
input:focus, select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 8px rgba(11,116,218,0.2);}
button{background:var(--accent);color:#fff;border:none;cursor:pointer;margin-top:10px;font-weight:bold;}
button:hover{background:#095ab5;transform:scale(1.02);}

@keyframes fadeIn{to{opacity:1;transform:translateY(0);}}
</style>
</head>
<body>
<div class="app">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="brand"><h2>Manager Dashboard</h2></div>
    <div class="profile-card" id="mgrProfile">
      <p><b>Name:</b> <span id="mgrName"></span></p>
      <p><b>Account:</b> <span id="mgrAcc"></span></p>
      <p><b>Password:</b> <span id="mgrPw"></span></p>
      <p><b>Email:</b> <span id="mgrEmail"></span></p>
      <p><b>Mobile:</b> <span id="mgrMobile"></span></p>
      <p><b>Balance:</b> ₹<span id="mgrBal"></span></p>
    </div>
    <nav class="nav">
      <a href="#" onclick="showTab('home')">Home</a>
      <a href="#" onclick="showTab('employee')">Employee Management</a>
      <a href="#" onclick="showTab('aadhar')">Aadhar Management</a>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="content">
    <!-- Home Tab -->
    <div id="homeTab" class="card show">
      <h3>Welcome <span id="welcomeName"></span></h3>
      <p>This is your manager dashboard.</p>
    </div>

    <!-- Employee Tab -->
    <div id="employeeTab" class="card">
      <h3>Employee Salary Transfer</h3>
      <label>Select Employee</label>
      <select id="empSelect"></select>
      
      <label>Amount to Transfer (₹)</label>
      <input type="number" id="empAmount">
      
      <button onclick="transferToEmployee()">Transfer Money</button>
      
      <div id="empResult" style="margin-top:10px;color:green;"></div>
    </div>

    <!-- Aadhar Tab -->
    <div id="aadharTab" class="card">
      <h3>Aadhar Card</h3>
      <label>Enter SK ID</label>
      <input type="text" id="aadharSKID">
      <button onclick="viewAadhar()">View Aadhar</button>
      <div id="aadharDetails" style="margin-top:10px;background:#f3eaff;padding:10px;border-radius:8px;"></div>
      <button onclick="downloadAadhar()">Download Aadhar PDF</button>
    </div>
  </main>
</div>

<script>
function load(key){return JSON.parse(localStorage.getItem(key)||'[]');}
function save(key,val){localStorage.setItem(key,JSON.stringify(val));}

// Manager profile
let manager = load('managers')[0];
if(manager){
  document.getElementById('mgrName').textContent = manager.name;
  document.getElementById('mgrAcc').textContent = manager.account;
  document.getElementById('mgrPw').textContent = manager.password;
  document.getElementById('mgrEmail').textContent = manager.email;
  document.getElementById('mgrMobile').textContent = manager.mobile;
  document.getElementById('mgrBal').textContent = parseFloat(manager.balance).toFixed(2);
  document.getElementById('welcomeName').textContent = manager.name;
}

// Tab switch
function showTab(tab){
  ['homeTab','employeeTab','aadharTab'].forEach(id=>document.getElementById(id).classList.remove('show'));
  document.getElementById(tab+'Tab').classList.add('show');
}

// Populate Employee dropdown
let employees = load('employees');
let empSelect = document.getElementById('empSelect');
employees.forEach(emp=>{
  let opt = document.createElement('option'); 
  opt.value = emp.id; 
  opt.textContent = `${emp.fname} ${emp.lname} (ID:${emp.id})`;
  empSelect.appendChild(opt);
});

// Transfer money to employee
function transferToEmployee(){
  let empId = empSelect.value;
  let amt = parseFloat(document.getElementById('empAmount').value);
  if(!empId || !amt || amt<=0) return alert('Select employee and enter valid amount!');
  if(amt>manager.balance) return alert('Insufficient manager balance!');

  // Update manager balance
  manager.balance = (parseFloat(manager.balance) - amt).toFixed(2);
  save('managers',[manager]);
  document.getElementById('mgrBal').textContent = manager.balance;

  // Update employee balance
  let empList = load('employees');
  let emp = empList.find(e=>e.id===empId);
  emp.balance = (parseFloat(emp.balance || 0) + amt).toFixed(2);
  save('employees', empList);

  document.getElementById('empResult').textContent = `₹${amt} transferred from Manager Account ${manager.account} to Employee ${emp.fname} ${emp.lname} (ID:${emp.id}). Employee Balance: ₹${emp.balance}`;
}

// Aadhar view
function viewAadhar(){
  let skid = document.getElementById('aadharSKID').value.trim();
  let aadhars = load('aadhar')||[];
  let data = aadhars.find(a=>a.skid===skid);
  let div = document.getElementById('aadharDetails');
  if(!data){ div.innerHTML="<b>No Aadhar found.</b>"; return; }
  div.innerHTML = `
    <p><b>Name:</b> ${data.name}</p>
    <p><b>Father Name:</b> ${data.father}</p>
    <p><b>DOB:</b> ${data.dob}</p>
    <p><b>Mobile:</b> ${data.mobile}</p>
    <p><b>Address:</b> ${data.address}</p>
    <p><b>SK ID:</b> ${data.skid}</p>
  `;
}

// Download Aadhar as text file
function downloadAadhar(){
  let div = document.getElementById('aadharDetails');
  if(!div.innerHTML) return alert("No Aadhar to download!");
  let blob = new Blob([div.innerText], {type:'text/plain'});
  let a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'Aadhar_'+Date.now()+'.txt';
  a.click();
}
</script>
</body>
</html>
